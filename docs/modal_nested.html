<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">Documentation</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="https://github.com/metal/metal"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="http://metaljs-chat.wedeploy.io/"><img src="/images/slack_icon.svg" alt="Slack Icon"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">Quick Start</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">Getting Started</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">Tutorial: Modal</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">Tutorial: Modal - Events</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">Tutorial: Modal - Updates</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">Tutorial: Modal - Nested Components</a></li><li class="docs-nav-item"><a href="/docs/modal_testing.html" class="docs-nav-link">Tutorial: Modal - Testing</a></li></ul><p class="docs-nav-group">Guides</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">Alias</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">State</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">Component Lifecycle</a></li><li class="docs-nav-item"><a href="/docs/rendering-components.html" class="docs-nav-link">Rendering Components</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">Inline Events</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">Nested Components</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">Importing</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy Components</a></li><li class="docs-nav-item"><a href="/docs/jsx-components.html" class="docs-nav-link">JSX Components</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">Progressive Enhancement</a></li><li class="docs-nav-item"><a href="/docs/yeoman-generator.html" class="docs-nav-link">Yeoman Generator</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">Building</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">Performance</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>Tutorial: Modal - Nested Components</h1><p>In the <a href="/docs/modal_updates.html">previous section</a> we finished working on our component's behavior.</p><p>But what if our <strong>Modal</strong> header's markup was very similar to one that is used in other places though? Ideally we'd move it into a separate component that can be reused. That's what we'll be doing in this section.</p><h2>Creating <strong>CloseHeader</strong></h2><p>First let's create the new component. Add a <strong>src/CloseHeader.js</strong> file to your project:</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/CloseHeader.js</button><button class="code-tab" data-index="1" type="button">JSX: src/CloseHeader.js</button></div><div class="content"><textarea class="code" data-mode="javascript">import templates from './CloseHeader.soy';
import Component from 'metal-component';
import Soy from 'metal-soy';

class CloseHeader extends Component {
}
Soy.register(CloseHeader, templates);

export default CloseHeader;</textarea><textarea class="code hidden" data-mode="javascript">import JSXComponent from 'metal-jsx';

class CloseHeader extends JSXComponent {
	render() &lbrace;
	}
}

export default CloseHeader;</textarea></div></div><p>Now let's prepare the template to be similar to the one used by <strong>Modal</strong>:</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/CloseHeader.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/CloseHeader.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">&lbrace;namespace CloseHeader&rbrace;

/**
 * @param cssClass
 * @param onClick
 * @param title
 */
&lbrace;template .render&rbrace;
	&lt;header class="{$cssClass}"&gt;
		&lt;button onClick="{$onClick}" type="button" class="close"&gt;
			&lt;span&gt;×&lt;/span&gt;
		&lt;/button&gt;
		&lt;h4&gt;{$title}&lt;/h4&gt;
	&lt;/header&gt;
&lbrace;/template&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">render() {
	return &lt;header class={this.config.cssClass}&gt;
		&lt;button onClick={this.config.onClick} type="button" class="close"&gt;
			&lt;span&gt;×&lt;/span&gt;
		&lt;/button&gt;
		&lt;h4&gt;{this.config.title}&lt;/h4&gt;
	&lt;/header&gt;;
}</textarea></div></div><p>Done! Our new component is ready to be used by <strong>Modal</strong>.</p><h2>Using <strong>CloseHeader</strong></h2><p>All we have to do is to replace the header markup from <strong>Modal</strong>'s template with a call to <strong>CloseHeader</strong>:</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">/**
 * @param body
 * @param close
 * @param header
 * @param shown
 */
&lbrace;template .render&rbrace;
	&lt;div class="modal {$shown ? 'show': ''}"&gt;
		&lt;div class="modal-dialog"&gt;
			&lt;div class="modal-content"&gt;
				&lbrace;call CloseHeader.render&rbrace;
					&lbrace;param cssClass: 'modal-header' /&rbrace;
					&lbrace;param onClick: $close /&rbrace;
					&lbrace;param title: $header /&rbrace;
				&lbrace;/call&rbrace;
				&lt;section class="modal-body"&gt;
					{$body}
				&lt;/section&gt;
				&lt;footer class="modal-footer"&gt;
					&lt;button type="button" class="btn btn-primary"&gt;OK&lt;/button&gt;
				&lt;/footer&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lbrace;/template&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">render() {
	var cssClass = 'modal';
	if (this.shown) {
		cssClass += 'show';
	}
	return &lt;div class={cssClass}&gt;
		&lt;div class="modal-dialog"&gt;
			&lt;div class="modal-content"&gt;
				&lt;CloseHeader
					cssClass="modal-header"
					onClick={this.close.bind(this)}
					title={this.header}
				/&gt;
				&lt;section class="modal-body"&gt;
					{this.body}
				&lt;/section&gt;
				&lt;footer class="modal-footer"&gt;
					&lt;button type="button" class="btn btn-primary"&gt;OK&lt;/button&gt;
				&lt;/footer&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;;
}</textarea></div></div><p>This will not only render <strong>CloseHeader</strong> at the right position, but also instantiate it for you. For more details on nested components, check out the <a href="/docs/nested-components.html">guide about it</a>.</p><h2>Next steps</h2><p>Now that we have learned how to properly create a new component, it'd good to also know how to test it. The next section will focus on that.</p><p><strong><a href="/docs/modal_testing.html">↪ Tutorial: Modal - Testing</a></strong></p></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>Brought to you by <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a>.</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal/blob/master/LICENSE.md">BSD</a> License.</span></p></div></footer><script src="/scripts/highlight.js"></script><script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-37033501-7', 'auto');
	ga('send', 'pageview');</script></body></html>