<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">Documentation</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="https://github.com/metal/metal"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="http://metaljs-chat.wedeploy.io/"><img src="/images/slack_icon.svg" alt="Slack Icon"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">Quick Start</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">Getting Started</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">Tutorial: Modal</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">Tutorial: Modal - Events</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">Tutorial: Modal - Updates</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">Tutorial: Modal - Nested Components</a></li><li class="docs-nav-item"><a href="/docs/modal_testing.html" class="docs-nav-link">Tutorial: Modal - Testing</a></li></ul><p class="docs-nav-group">Guides</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">Alias</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">State</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">Component Lifecycle</a></li><li class="docs-nav-item"><a href="/docs/rendering-components.html" class="docs-nav-link">Rendering Components</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">Inline Events</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">Nested Components</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">Importing</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy Components</a></li><li class="docs-nav-item"><a href="/docs/jsx-components.html" class="docs-nav-link">JSX Components</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">Progressive Enhancement</a></li><li class="docs-nav-item"><a href="/docs/yeoman-generator.html" class="docs-nav-link">Yeoman Generator</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">Building</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">Performance</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>Nested Components</h1><p>The ability to reference components inside templates can be very useful. It enables the developer to correctly place the child component at the right position inside the parent in an intuitive way.</p><p>This can certainly be done with <strong>Metal.js</strong> components. For example, let's say we've already built a simple component called <strong>Button</strong>.</p><p>Now we're building a <strong>Modal</strong> component, and we want it to render some buttons inside the footer. In <strong>Modal</strong>'s template file we could do the following:</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">&lt;div class="footer"&gt;
  &lbrace;foreach $button in $buttons&rbrace;
    &lbrace;call Button.render&rbrace;
      &lbrace;param label: $button /&rbrace;
    &lbrace;/call&rbrace;
  &lbrace;/foreach&rbrace;
&lt;/div&gt;</textarea><textarea class="code hidden" data-mode="javascript">var buttons = this.config.buttons.map(button => {
  return &lt;Button label={button} /&gt;;
});
return &lt;div class="footer"&gt;{buttons}&lt;/div&gt;;</textarea></div></div><p>When Modal is rendered, the buttons also will be, at the specified position. Besides this, <strong>Button</strong> components will be automatically instantiated for these elements.</p><h2>Accessing sub component instances</h2><p>But what if we need to access the created instances? That's possible by using <strong>ref</strong>. Let's add one to the previous example and see what happens:</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">&lbrace;foreach $button as $buttons&rbrace;
  &lbrace;call Button.render&rbrace;
    &lbrace;param label: $button /&rbrace;
    &lbrace;param ref: 'button' + index($button) /&rbrace;
  &lbrace;/call&rbrace;
&lbrace;/foreach&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">var buttons = this.config.buttons.map((button, index) => {
  return &lt;Button label={button} ref={'button' + index} /&gt;;
});</textarea></div></div><p>Now you'll be able to access your sub components through your instance's <code>components</code> property, like this:</p><textarea class="code" data-mode="javascript">
modal.components.button0 // The instance for first button
modal.components.button1 // The instance for second button</textarea></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>Brought to you by <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a>.</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal/blob/master/LICENSE.md">BSD</a> License.</span></p></div></footer><script src="/scripts/highlight.js"></script></body></html>